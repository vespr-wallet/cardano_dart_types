// ignore_for_file: non_constant_identifier_names, avoid_print, unused_local_variable, dead_code, unreachable_from_main

import "package:cardano_dart_types/cardano_dart_types.dart";

extension AddrExt on CardanoAddress {
  CardanoAddress withPaymentCredentials(List<int> newCredentials) {
    return CardanoAddress.fromPaymentCredentials(
      paymentCredentials: newCredentials,
      stakeCredentials: stakeCredentialsBytes,
      networkId: networkId,
    );
  }

  CardanoAddress withScriptType() {
    return CardanoAddress.fromPaymentCredentials(
      credentialType: CredentialType.script,
      paymentCredentials: credentialsBytes,
      stakeCredentials: stakeCredentialsBytes,
      networkId: networkId,
    );
  }
}

// [vending-machine] [2022-09-23 17:52:11] {"unsigned_tx":"","addresses_for_signing":["addr1q8k5nkddh5r9jg5shxskqv3ht44hn4xlwcx26rvme224tlzpn8mxk9kwn66cf8kev3el4nsztvhfhj7lrc6j44pk9xqsafxu96"]}
void main() async {
  debugAssertEnabled = false;

  // final txBody = [
  //   "a500818258203b40265111d8bb3c3c608d95b3a0bf83461ace32d79336579a1939b3aad1c0b7000181825839017cb05fce110fb999f01abb4f62bc455e217d4a51fde909fa9aea545443ac53c046cf6a42095e3c60310fa802771d0672f8fe2d1861138b090102182a030a04818a03581c13381d918ec0283ceeff60f7f4fc21e1540e053ccf8a77307a7a32ad582007821cd344d7fd7e3ae5f2ed863218cb979ff1d59e50c4276bdc479b0d0844501b0000000ba43b74001a1443fd00d81e82031864581de1794d9b3408c9fb67b950a48a0690f070f117e9978f7fc1d120fc58ad82581c1d227aefa4b773149170885aadba30aab3127cc611ddbc4999def61c581c794d9b3408c9fb67b950a48a0690f070f117e9978f7fc1d120fc58ad848400190bb84436e44b9af68400190bb84436e44b9b500178ff2483e3a2330a34c4a5e576c2078301190bb86d616161612e626262622e636f6d82026d616161612e626262632e636f6d82782968747470733a2f2f7777772e76616375756d6c6162732e636f6d2f73616d706c6555726c2e6a736f6e5820cdb714fd722c24aeb10c93dbb0ff03bd4783441cd5ba2a8b6f373390520535bb",
  //   "a500818258203b40265111d8bb3c3c608d95b3a0bf83461ace32d79336579a1939b3aad1c0b7000181825839017cb05fce110fb999f01abb4f62bc455e217d4a51fde909fa9aea545443ac53c046cf6a42095e3c60310fa802771d0672f8fe2d1861138b090102182a030a04818a03581c13381d918ec0283ceeff60f7f4fc21e1540e053ccf8a77307a7a32ad582007821cd344d7fd7e3ae5f2ed863218cb979ff1d59e50c4276bdc479b0d0844501b0000000ba43b74001a1443fd00d81e82031864581de1794d9b3408c9fb67b950a48a0690f070f117e9978f7fc1d120fc58ad81581c1d227aefa4b773149170885aadba30aab3127cc611ddbc4999def61c818400190bb84436e44b9af682782968747470733a2f2f7777772e76616375756d6c6162732e636f6d2f73616d706c6555726c2e6a736f6e5820cdb714fd722c24aeb10c93dbb0ff03bd4783441cd5ba2a8b6f373390520535bb",
  //   "a500818258203b40265111d8bb3c3c608d95b3a0bf83461ace32d79336579a1939b3aad1c0b7000181825839017cb05fce110fb999f01abb4f62bc455e217d4a51fde909fa9aea545443ac53c046cf6a42095e3c60310fa802771d0672f8fe2d1861138b090102182a030a04818a03581c13381d918ec0283ceeff60f7f4fc21e1540e053ccf8a77307a7a32ad582007821cd344d7fd7e3ae5f2ed863218cb979ff1d59e50c4276bdc479b0d0844501b0000000ba43b74001a1443fd00d81e82031864581de1794d9b3408c9fb67b950a48a0690f070f117e9978f7fc1d120fc58ad82581c1d227aefa4b773149170885aadba30aab3127cc611ddbc4999def61c581c794d9b3408c9fb67b950a48a0690f070f117e9978f7fc1d120fc58ad828400190bb84436e44b9af68301190bb86d616161612e626262622e636f6d82782968747470733a2f2f7777772e76616375756d6c6162732e636f6d2f73616d706c6555726c2e6a736f6e5820cdb714fd722c24aeb10c93dbb0ff03bd4783441cd5ba2a8b6f373390520535bb",
  // ];

  // for (final txBody in txBody) {
  //   final tx = CardanoTransactionBody.deserializeHex(txBody);

  //   print(tx.toJson(prettyPrint: true));
  // }

  // return;

  final txs = [
    "84a700828258204d8dfa49005c69dcf6570c4de0a8e75fbb1c3e29cf1810e57d64999390dda54f098258204d8dfa49005c69dcf6570c4de0a8e75fbb1c3e29cf1810e57d64999390dda54f0a0184a300583911c3e28c36c3447315ba5a56f33da6a6ddc1770a876a8d9f0cb3a97c4cced239804eb8b59576bb0fc5bed4dc948ebefb60cbc3ace0ddc82b5901821a00297f7aa1581c4342a3d3c15545a592bf38294dc75c7a1dd3550388303e3a06f4416da14543455252411b00000003dc62172d028201d818590134d8799fd8799f581c8c4df3793c5edbe87104264baca9d10d940b38c19c53890b49a38825ffd8799fd8799f581c8c4df3793c5edbe87104264baca9d10d940b38c19c53890b49a38825ffd8799fd8799fd8799f581cced239804eb8b59576bb0fc5bed4dc948ebefb60cbc3ace0ddc82b59ffffffffd87980d8799fd8799f581c8c4df3793c5edbe87104264baca9d10d940b38c19c53890b49a38825ffd8799fd8799fd8799f581cced239804eb8b59576bb0fc5bed4dc948ebefb60cbc3ace0ddc82b59ffffffffd87980d8799f581cf5808c2c990d86da54bfc97d89cee6efa20cd8461616359478d96b4c5820a1db2a02b72ea2d645ce9be4620f4be8ded8949f3b939058cbcf8bf3fc5c08a5ffd8799fd87980d8799f1b00000003dc62172dff1a00f29679d87980ff1a000aae60d87a80ff82583901ffebcc9e31749eb5803e396202d84e3b436ec362463b2fd70fb4c8819086fc9117b2dadb43da1f922c46039a47d51bff09433dcdd18f1cce1a000f4240825839018c4df3793c5edbe87104264baca9d10d940b38c19c53890b49a38825ced239804eb8b59576bb0fc5bed4dc948ebefb60cbc3ace0ddc82b591a001e8480825839018c4df3793c5edbe87104264baca9d10d940b38c19c53890b49a38825ced239804eb8b59576bb0fc5bed4dc948ebefb60cbc3ace0ddc82b59821a012941b6a9581c17e912c494a3095ebf5d0babd1a0a6d51c0527da5906516272eb87caa34f53656372657442756c6c7333383232014f53656372657442756c6c7333383636014f53656372657442756c6c733339353801581c307b48294240e20b5d74fca33fbd84f19f1fe6ac178b3739e55fe52aa154556c74696d61746520564950205061737338313401581c3b2b75a537923412a61a4c3f415436b48f75301a57a272e3bb275a92a1467078655a745502581c4342a3d3c15545a592bf38294dc75c7a1dd3550388303e3a06f4416da145434552524101581c5790bccb5f994a47c2829088d4dd54a4b9d487caa4fae257011122d6a1574c69666574696d6520526f79616c74696573202330393701581c6b654d9447169eb9dbf985a9600ac1fabbec6378bb27fb2e2293e075a353416c706861537572666572735072696d6533380154416c706861537572666572735072696d653335370154416c706861537572666572735072696d6534393001581c794325740e14ddd4aa5cbb0d8486b54409b554e48491e806c915e276a144414e564c190960581c9e46ef2f83c5c733587f3d4a40fdc04f1fc76a54d79b26b8cbe22f40a14744524143484d411a9fc321bf581cbd369dc746e4a872a55fb9f0472d5fe30f3ba3fe0b72f280fe2455a5b352456c797369756d546974616e3030303131340152456c797369756d546974616e3030303134390152456c797369756d546974616e3030303434310152456c797369756d546974616e3030303539360152456c797369756d546974616e3030303934320152456c797369756d546974616e3030303937310152456c797369756d546974616e3030303938320152456c797369756d546974616e3030313030350152456c797369756d546974616e3030313131370152456c797369756d546974616e3030313131390152456c797369756d546974616e3030313136300152456c797369756d546974616e3030313136380152456c797369756d546974616e3030313530320152456c797369756d546974616e3030313631360152456c797369756d546974616e3030313733380152456c797369756d546974616e3030313839320152456c797369756d546974616e3030313930310152456c797369756d546974616e3030313931390152456c797369756d546974616e30303233393701021a00057a65031a091968950758208d4726b5f6debe28b8e97aca9db85c1d28ed63e6fc3a0ce567a4744b6c1c37c7081a09195a850e82581c8c4df3793c5edbe87104264baca9d10d940b38c19c53890b49a38825581cced239804eb8b59576bb0fc5bed4dc948ebefb60cbc3ace0ddc82b59a0f5a11902a2a1636d7367826f44657868756e7465722054726164656d506172746e6572205645535052",
    // "84a40081825820f5eea7abbc821135c74261fc07f46f73b0b4ee4fcba778bac248a3d386c003210301828258390114c16d7f43243bd81478e68b9db53a8528fd4fb1078d58d54a7f11241d227aefa4b773149170885aadba30aab3127cc611ddbc4999def61c821a00177a6ea3581c1d7f33bd23d85e1a25d87d86fac4f199c3197a2f7afeb662a0f34e1ea150776f726c646d6f62696c65746f6b656e1a0001e791581c2b8822f7799f325e278991a244e7715591945b1c2a3589cc76035ca9a1477363726174636801581c9abf0afd2f236a19f2842d502d0450cbcd9c79f123a9708f96fd9b96a144454e4353018258390114c16d7f43243bd81478e68b9db53a8528fd4fb1078d58d54a7f11241d227aefa4b773149170885aadba30aab3127cc611ddbc4999def61c1a0018491d021a0002c431048183098200581c1d227aefa4b773149170885aadba30aab3127cc611ddbc4999def61c8200581c53ec40a7a3859e2a52354f0fb5ef50ff9040623816b8dc2775ec564fa0f5f6",
    // "84a40081825820cd50d05f77fa8cedf434a951148ae6f55326880c7b2d276b154718204a607a3e01018282583900e53a24b2fbeeef3bc3adc55622092cc8c172fad61c231d1358e5f023272d0b87fb7b9561d4d3dee46b8d422a8a8ec555c514e2b15f0729341a000f424082583900e53a24b2fbeeef3bc3adc55622092cc8c172fad61c231d1358e5f023272d0b87fb7b9561d4d3dee46b8d422a8a8ec555c514e2b15f0729341b00000017482f74f4021a0002b69d13a18202581c23bc63ced4e40b22dd4e6051c258ba38d5679d81e33f34fe5e5cdb4da1825820cd50d05f77fa8cedf434a951148ae6f55326880c7b2d276b154718204a607a3e0082018268746573742e636f6d58200000000000000000000000000000000000000000000000000000000000000002a10082825820acb1c00cbfdcb5d79915d27cca0b8566646d1e0b86e61c67a1bcd289e6e2a93858400de03e1b34cbc675817eb46c12969886ab71674496531c38e4a0342a57a6e796b971e7b0f8740fc570c735f00812588be8fd79411627d42805c096f52bca5105825820320b0744172502cec5a5984a4431d62ea8a3896a8d570ac517afeecac66f3b8558405db1a8dfbd03db686ea6614f234f6075c219fc18a5901db430a64c43e290f13626dc785226d26ce737613f4d967798e4282f40d1bfeccba413a1fc47e8e60c07f5f6",
    // "84a500818258206bb955dc14b7a58a15e2c2280d20b20348d79a6adb0f47089e7dcc5716de7a9301018282583900e53a24b2fbeeef3bc3adc55622092cc8c172fad61c231d1358e5f023272d0b87fb7b9561d4d3dee46b8d422a8a8ec555c514e2b15f0729341a000f424082583900e53a24b2fbeeef3bc3adc55622092cc8c172fad61c231d1358e5f023272d0b87fb7b9561d4d3dee46b8d422a8a8ec555c514e2b15f0729341b00000017481dc615021a000292011518851616a0f5f6",
  ];

  for (final tx in txs) {
    // final cborData = cborDecode(tx.hexDecode());
    // print(cborData.toJsonV2(prettyPrint: true));
    final txx = CardanoTransaction.deserializeFromHex(tx);

    print("CBOR Input: $tx");
    print("CBOR Parsed");
    print(txx.toJson(prettyPrint: true));
  }
  return;

  // final minswapSubmitOrder = "84a60081825820b6e5f6eedabe5d5d3a20c68a16b2ad3c9ddf3d5f5fdd49403779187d365db7da02018283583911a65ca58a4e9c755fa830173d2a5caed458ac0c73f97db7faae2e7e3b52563c5410bff6a0d43ccebb7c37e1f69f5eb260552521adff33b9c21a008943dc5820cee864d5509f3e26489b8295a7eb9a19c0947428b459652217ef57956a669baa82583901ed49d9adbd06592290b9a16032375d6b79d4df760cad0d9bca9555fc4199f66b16ce9eb5849ed96473face025b2e9bcbdf1e352ad43629811a0af98e3a021a0002d141031a05db9eb0075820f1ff69ee39c1773d81414326ebe36a35ad2341d58e63e7f49fd3ae3df28791ec0b5820574ee569d6ac99001f2db7b442442e2b0ad42bbc991bd0b8cb8d5986832c2e65a20081825820dd5fba0222e5a11fd1979c4cc7a1ee88ff7a6c0ead5cb62d008a72dd709afae15840990583e7c2422199e4aeeb44eaa8cd1a03bd5774322df92e58e3aa726179a97577b076df5fe411f7b8efea67ee8be2dbe9766e7b15bf6f56319f0777e1c61d04049fd8799fd8799fd8799f581ced49d9adbd06592290b9a16032375d6b79d4df760cad0d9bca9555fcffd8799fd8799fd8799f581c4199f66b16ce9eb5849ed96473face025b2e9bcbdf1e352ad4362981ffffffffd8799fd8799f581ced49d9adbd06592290b9a16032375d6b79d4df760cad0d9bca9555fcffd8799fd8799fd8799f581c4199f66b16ce9eb5849ed96473face025b2e9bcbdf1e352ad4362981ffffffffd87a80d8799fd8799f581c29d222ce763455e3d7a09a665ce554f00ac89d2e99a1a83d267170c6434d494eff1a03fb2a80ff1a001e741c1a001e8480fffff5a11902a2a1636d736781781d4d696e737761703a2073776170206f7264657220766961205645535052";
  // final minswapCancelOrder = "84aa0081825820471e33432b8c6e5820e53618154ba23a2b5c094e1935ddfda9b8751aad3dfc4600018182583901ed49d9adbd06592290b9a16032375d6b79d4df760cad0d9bca9555fc4199f66b16ce9eb5849ed96473face025b2e9bcbdf1e352ad43629811a00862885021a00031b57031a05dbac62075820039c21bb80e729f444f6f5ab66b7e6d4c1deca6ece1cafe940209783bba2a32d0b582073542d38263fb89753b0e4da0df046da94175f2165b40861b609859d74a49c150d818258205938fa6313b485a1a0b7492e2d61336141ea7a7ad4dad041955d52c05d923ad4000e81581ced49d9adbd06592290b9a16032375d6b79d4df760cad0d9bca9555fc1082583901ed49d9adbd06592290b9a16032375d6b79d4df760cad0d9bca9555fc4199f66b16ce9eb5849ed96473face025b2e9bcbdf1e352ad43629811a004c4b40111a004c4b40a3038159014f59014c01000032323232323232322223232325333009300e30070021323233533300b3370e9000180480109118011bae30100031225001232533300d3300e22533301300114a02a66601e66ebcc04800400c5288980118070009bac3010300c300c300c300c300c300c300c007149858dd48008b18060009baa300c300b3754601860166ea80184ccccc0288894ccc04000440084c8c94ccc038cd4ccc038c04cc030008488c008dd718098018912800919b8f0014891ce1317b152faac13426e6a83e06ff88a4d62cce3c1634ab0a5ec133090014a0266008444a00226600a446004602600a601a00626600a008601a006601e0026ea8c03cc038dd5180798071baa300f300b300e3754601e00244a0026eb0c03000c92616300a001375400660106ea8c024c020dd5000aab9d5744ae688c8c0088cc0080080048c0088cc00800800555cf2ba15573e6e1d200201049fd8799fd8799fd8799f581ced49d9adbd06592290b9a16032375d6b79d4df760cad0d9bca9555fcffd8799fd8799fd8799f581c4199f66b16ce9eb5849ed96473face025b2e9bcbdf1e352ad4362981ffffffffd8799fd8799f581ced49d9adbd06592290b9a16032375d6b79d4df760cad0d9bca9555fcffd8799fd8799fd8799f581c4199f66b16ce9eb5849ed96473face025b2e9bcbdf1e352ad4362981ffffffffd87a80d8799fd8799f581c29d222ce763455e3d7a09a665ce554f00ac89d2e99a1a83d267170c6434d494eff1a03fb2a80ff1a001e741c1a001e8480ffff0581840000d87a80821950131a007a6dacf5a11902a2a1636d736781754d696e737761703a2043616e63656c204f72646572";

  final String raw_tx = """
  84a500818258206bb955dc14b7a58a15e2c2280d20b20348d79a6adb0f47089e7dcc5716de7a9301018282583900e53a24b2fbeeef3bc3adc55622092cc8c172fad61c231d1358e5f023272d0b87fb7b9561d4d3dee46b8d422a8a8ec555c514e2b15f0729341a000f424082583900e53a24b2fbeeef3bc3adc55622092cc8c172fad61c231d1358e5f023272d0b87fb7b9561d4d3dee46b8d422a8a8ec555c514e2b15f0729341b00000017481dc615021a000292011518851616a0f5f6
  """
      .trim()
      .split("\n")
      .map((e) => e.replaceAll("flutter: ║ ", ""))
      .join();

  final txx = CardanoTransaction.deserializeFromHex(raw_tx);

  print(txx.toJson(prettyPrint: true));
}
