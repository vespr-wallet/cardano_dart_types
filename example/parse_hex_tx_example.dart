// ignore_for_file: non_constant_identifier_names, avoid_print, unused_local_variable, dead_code, unreachable_from_main

import "package:cardano_dart_types/cardano_dart_types.dart";

extension AddrExt on CardanoAddress {
  CardanoAddress withPaymentCredentials(List<int> newCredentials) {
    return CardanoAddress.fromPaymentCredentials(
      paymentCredentials: newCredentials,
      stakeCredentials: stakeCredentialsBytes,
      networkId: networkId,
    );
  }

  CardanoAddress withScriptType() {
    return CardanoAddress.fromPaymentCredentials(
      credentialType: CredentialType.script,
      paymentCredentials: credentialsBytes,
      stakeCredentials: stakeCredentialsBytes,
      networkId: networkId,
    );
  }
}

// [vending-machine] [2022-09-23 17:52:11] {"unsigned_tx":"","addresses_for_signing":["addr1q8k5nkddh5r9jg5shxskqv3ht44hn4xlwcx26rvme224tlzpn8mxk9kwn66cf8kev3el4nsztvhfhj7lrc6j44pk9xqsafxu96"]}
void main() async {
  debugAssertEnabled = true;

  // final txBody = [
  //   "a500818258203b40265111d8bb3c3c608d95b3a0bf83461ace32d79336579a1939b3aad1c0b7000181825839017cb05fce110fb999f01abb4f62bc455e217d4a51fde909fa9aea545443ac53c046cf6a42095e3c60310fa802771d0672f8fe2d1861138b090102182a030a04818a03581c13381d918ec0283ceeff60f7f4fc21e1540e053ccf8a77307a7a32ad582007821cd344d7fd7e3ae5f2ed863218cb979ff1d59e50c4276bdc479b0d0844501b0000000ba43b74001a1443fd00d81e82031864581de1794d9b3408c9fb67b950a48a0690f070f117e9978f7fc1d120fc58ad82581c1d227aefa4b773149170885aadba30aab3127cc611ddbc4999def61c581c794d9b3408c9fb67b950a48a0690f070f117e9978f7fc1d120fc58ad848400190bb84436e44b9af68400190bb84436e44b9b500178ff2483e3a2330a34c4a5e576c2078301190bb86d616161612e626262622e636f6d82026d616161612e626262632e636f6d82782968747470733a2f2f7777772e76616375756d6c6162732e636f6d2f73616d706c6555726c2e6a736f6e5820cdb714fd722c24aeb10c93dbb0ff03bd4783441cd5ba2a8b6f373390520535bb",
  //   "a500818258203b40265111d8bb3c3c608d95b3a0bf83461ace32d79336579a1939b3aad1c0b7000181825839017cb05fce110fb999f01abb4f62bc455e217d4a51fde909fa9aea545443ac53c046cf6a42095e3c60310fa802771d0672f8fe2d1861138b090102182a030a04818a03581c13381d918ec0283ceeff60f7f4fc21e1540e053ccf8a77307a7a32ad582007821cd344d7fd7e3ae5f2ed863218cb979ff1d59e50c4276bdc479b0d0844501b0000000ba43b74001a1443fd00d81e82031864581de1794d9b3408c9fb67b950a48a0690f070f117e9978f7fc1d120fc58ad81581c1d227aefa4b773149170885aadba30aab3127cc611ddbc4999def61c818400190bb84436e44b9af682782968747470733a2f2f7777772e76616375756d6c6162732e636f6d2f73616d706c6555726c2e6a736f6e5820cdb714fd722c24aeb10c93dbb0ff03bd4783441cd5ba2a8b6f373390520535bb",
  //   "a500818258203b40265111d8bb3c3c608d95b3a0bf83461ace32d79336579a1939b3aad1c0b7000181825839017cb05fce110fb999f01abb4f62bc455e217d4a51fde909fa9aea545443ac53c046cf6a42095e3c60310fa802771d0672f8fe2d1861138b090102182a030a04818a03581c13381d918ec0283ceeff60f7f4fc21e1540e053ccf8a77307a7a32ad582007821cd344d7fd7e3ae5f2ed863218cb979ff1d59e50c4276bdc479b0d0844501b0000000ba43b74001a1443fd00d81e82031864581de1794d9b3408c9fb67b950a48a0690f070f117e9978f7fc1d120fc58ad82581c1d227aefa4b773149170885aadba30aab3127cc611ddbc4999def61c581c794d9b3408c9fb67b950a48a0690f070f117e9978f7fc1d120fc58ad828400190bb84436e44b9af68301190bb86d616161612e626262622e636f6d82782968747470733a2f2f7777772e76616375756d6c6162732e636f6d2f73616d706c6555726c2e6a736f6e5820cdb714fd722c24aeb10c93dbb0ff03bd4783441cd5ba2a8b6f373390520535bb",
  // ];

  // for (final txBody in txBody) {
  //   final tx = CardanoTransactionBody.deserializeHex(txBody);

  //   print(tx.toJson(prettyPrint: true));
  // }

  // return;

  final txs = [
    "84ac00d901028382582087f9944697412403851599a3292d37e780b83f4d4905f0ca815e9e90210108cd00825820e53823731fd5b7e1fa1166b98f9bb76448b041fd39ff47e97e0a5447851f4a5301825820eaf0aba0888a8775db3b91fd78bb1f171915b057807e8550b18942278b0ade8f000182a300583931cb684a69e78907a9796b21fc150a758af5f2805e5ed5d5a8ce9f76f1b2f6abf60ccde92eae1a2f4fdf65f2eaf6208d872c6f0e597cc10b0701821b0000003ca6b8baa8a3581c20343d8105ec88de289351efa1d667c9aa7165927a8e36cc3083887ea14b534e454b5f4144415f4c511b7fffffff18e09124581c279c909f348e533da5808898f87f9a14bb2c3dfbbacccd631d927a3fa144534e454b1a045c8b91581cce1a4f1103fca3f93c1ba9b4e87fb0d9e855d66965ca3cf45165824aa14c534e454b5f4144415f4e465401028201d818590118d8799fd8799f581cce1a4f1103fca3f93c1ba9b4e87fb0d9e855d66965ca3cf45165824a4c534e454b5f4144415f4e4654ffd8799f4040ffd8799f581c279c909f348e533da5808898f87f9a14bb2c3dfbbacccd631d927a3f44534e454bffd8799f581c20343d8105ec88de289351efa1d667c9aa7165927a8e36cc3083887e4b534e454b5f4144415f4c51ff1a000183d0185018c81b00000001185ffbe61a000f04d31a1777d80f1a0001c19c9fd8799fd87a9f581c66e711a4bf9ddf46ff239143870b6893055a4fd4dea9f99fed6665cdffffff581c75c4570eb625ae881b32a34c52b159f6f3f3f2c7aaabf5bac468813358207f25663626f2b9d88e8b298874bed847538cfbc3f746cee82a62cb60cb94a9440aff82583901e53a24b2fbeeef3bc3adc55622092cc8c172fad61c231d1358e5f023272d0b87fb7b9561d4d3dee46b8d422a8a8ec555c514e2b15f072934821a006a306fb821581c025146866af908340247fe4e9672d5ac7059f1e8534696b5f920c9e6a14563625448431a000186a0581c057e283baef26fe8879f0a5b56d55893507cee6933c85babcb8db216a1434644411a00030d40581c123da5e4ef337161779c6729d2acd765f7a33a833b2a21a063ef65a5a14b5369636b4369747933383301581c160a880d9fc45380737cb7e57ff859763230aab28b3ef6a84007bfcca1444d49524118c8581c16fdd33c86af604e837ae57d79d5f0f1156406086db5f16afb3fcf51a14544474f4c441a08f0d180581c1a71dc14baa0b4fcfb34464adc6656d0e562571e2ac1bc990c9ce5f6a144574f4c461b00000002b4137ec6581c279c909f348e533da5808898f87f9a14bb2c3dfbbacccd631d927a3fa144534e454b190574581c2afb448ef716bfbed1dcb676102194c3009bee5399e93b90def9db6aa1454249534f4e1a00e4ddd8581c2b8822f7799f325e278991a244e7715591945b1c2a3589cc76035ca9a147736372617463681a017d7840581c2d7444cf9e317a12e3eb72bf424fd2a0c8fbafedf10e20bfdb4ad8aba1464348454444411a3ba0e480581c3c6c4b660cfe03cf02a66d2315148f9314492d643da1c7032ff22920a1434554481941a0581c4247d5091db82330100904963ab8d0850976c80d3f1b927e052e07bda146546f6b68756e03581c443726318f7a3995686a79f65ed48fdb79aaf576aecaee354d8ba018a1444e49444f1832581c544571c086d0e5c5022aca9717dd0f438e21190abb48f37b3ae129f0a14447524f5702581c5ad8deb64bfec21ad2d96e1270b5873d0c4d0f231b928b4c39eb2435a14661646f7369611a0f32fdc0581c6194158d24d71eca5cc5601c45de123bf78d02c297e851be2608810aa1444445414414581c6954264b15bc92d6d592febeac84f14645e1ed46ca5ebb9acdb5c15fa14553545249501903e8581c6ded36273214629f9ff35e9f9c7b8945d937a80a3796ddc4a646a50ea143485943188f581c88691a70bb0fe49cf9124b4f78553c36c09fa6264844e2b294119173a1454575736b6f0a581c8d0ae3c5b13b47907b16511a540d47436d12dcc96453c0f59089b451a14542524f4f4d1a004c4b40581caa2797739e4f4a1efd5346998febff59909e425b5fddb1b0ec4a24f8a1454c6f6f6b7a0c581cafc910d7a306d20c12903979d4935ae4307241d03245743548e76783a14541534849421ab2d05e00581cb788fbee71a32d2efc5ee7d151f3917d99160f78fb1e41a1bbf80d8fa1494c454146544f4b454e1b00000004c2dc803e581cb7c783f6304eddbdf8f0dece4715d63cb9f453be89d97c8fba155d57a144524553491832581cc68307e7ca850513507f1498862a57c7f4fae7ba8e84b8bc074093a9a14444494253191388581cc88bbd1848db5ea665b1fffbefba86e8dcd723b5085348e8a8d2260fa14444414e411a0047b760581cca942cb8bb5d1ef750766ded355f320880539111f10efa2b1a478ff9a1435241471818581cd030b626219d81673bd32932d2245e0c71ae5193281f971022b23a78a148436172646f67656f1901a4581cd894897411707efa755a76deb66d26dfd50593f2e70863e1661e98a0a14a7370616365636f696e730c581cdfc825363afcdff0f5ec3171f0a29b1d345d271714aa9b2a552b6bbfa148416e74546f6b656e1832581ce14fe3ab348f9a6198359481472601f4557b9f86984f40a186a3b1e8a1464348455252591a05f5e100581cea2d23f1fa631b414252824c153f2d6ba833506477a929770a4dd9c2a1464d414442554c1901f4581cf28f457472e539dc75e1598a2beddf49ce5a717998c708f05f5de610a144444546531819021a0005d608031a0a40a860075820d8ced2d459c0830377bfe01a8ae66a22e3c6a74fb8423b3f750588211ed2b265081a0a40a0f40b58204345dd7c82975b4079255a0617ef0fc11ef3915e330a7916d257ffd8d4c56bbe0dd9010283825820e8f377cad24cbf2abc057db8e539d682e6fd6d5b85aea4264474abbd06211da30b825820e8f377cad24cbf2abc057db8e539d682e6fd6d5b85aea4264474abbd06211da310825820975b6254a6a1afd1ba8f966b749a546151585c569c963b9dff4d1eaf67f8c964000ed9010282581ce53a24b2fbeeef3bc3adc55622092cc8c172fad61c231d1358e5f023581c661ae4b23b24ba9656d78b7637e6a66e889fa788c16c88017e4940521082583901661ae4b23b24ba9656d78b7637e6a66e889fa788c16c88017e494052c2c5baab297046f996aea6faa54eb92b6005bdb22c8288de08064e371a00ac9f53111a0038426d12d90102818258208aa606ad8c995af6e59b19c0fee2f5bb5abc04552d105a146f0a4921cca9b60000a200d90102818258207de85658aabb026debffa9dfbc7aa09aa447c0e3da4fe24ed6f6f68a22ff8fa75840a3c0bfb608941576af3ad6310987015a5939f7320bbc975ca08d2dd54b55a14a794a543a09cefba254b1e1952f5ab136d106f94c3aacf360daf8b351f58fab0205a182000282d8799f0202ff821a000a29c41a0da721f6f5d90103a100a11902a2a1636d7367846643617244654d71537465656c537761703a20312e31372e306d506172746e65723a204c6163656e4445582041676772656761746f72",
    // "84a40081825820f5eea7abbc821135c74261fc07f46f73b0b4ee4fcba778bac248a3d386c003210301828258390114c16d7f43243bd81478e68b9db53a8528fd4fb1078d58d54a7f11241d227aefa4b773149170885aadba30aab3127cc611ddbc4999def61c821a00177a6ea3581c1d7f33bd23d85e1a25d87d86fac4f199c3197a2f7afeb662a0f34e1ea150776f726c646d6f62696c65746f6b656e1a0001e791581c2b8822f7799f325e278991a244e7715591945b1c2a3589cc76035ca9a1477363726174636801581c9abf0afd2f236a19f2842d502d0450cbcd9c79f123a9708f96fd9b96a144454e4353018258390114c16d7f43243bd81478e68b9db53a8528fd4fb1078d58d54a7f11241d227aefa4b773149170885aadba30aab3127cc611ddbc4999def61c1a0018491d021a0002c431048183098200581c1d227aefa4b773149170885aadba30aab3127cc611ddbc4999def61c8200581c53ec40a7a3859e2a52354f0fb5ef50ff9040623816b8dc2775ec564fa0f5f6",
    // "84a40081825820cd50d05f77fa8cedf434a951148ae6f55326880c7b2d276b154718204a607a3e01018282583900e53a24b2fbeeef3bc3adc55622092cc8c172fad61c231d1358e5f023272d0b87fb7b9561d4d3dee46b8d422a8a8ec555c514e2b15f0729341a000f424082583900e53a24b2fbeeef3bc3adc55622092cc8c172fad61c231d1358e5f023272d0b87fb7b9561d4d3dee46b8d422a8a8ec555c514e2b15f0729341b00000017482f74f4021a0002b69d13a18202581c23bc63ced4e40b22dd4e6051c258ba38d5679d81e33f34fe5e5cdb4da1825820cd50d05f77fa8cedf434a951148ae6f55326880c7b2d276b154718204a607a3e0082018268746573742e636f6d58200000000000000000000000000000000000000000000000000000000000000002a10082825820acb1c00cbfdcb5d79915d27cca0b8566646d1e0b86e61c67a1bcd289e6e2a93858400de03e1b34cbc675817eb46c12969886ab71674496531c38e4a0342a57a6e796b971e7b0f8740fc570c735f00812588be8fd79411627d42805c096f52bca5105825820320b0744172502cec5a5984a4431d62ea8a3896a8d570ac517afeecac66f3b8558405db1a8dfbd03db686ea6614f234f6075c219fc18a5901db430a64c43e290f13626dc785226d26ce737613f4d967798e4282f40d1bfeccba413a1fc47e8e60c07f5f6",
    // "84a500818258206bb955dc14b7a58a15e2c2280d20b20348d79a6adb0f47089e7dcc5716de7a9301018282583900e53a24b2fbeeef3bc3adc55622092cc8c172fad61c231d1358e5f023272d0b87fb7b9561d4d3dee46b8d422a8a8ec555c514e2b15f0729341a000f424082583900e53a24b2fbeeef3bc3adc55622092cc8c172fad61c231d1358e5f023272d0b87fb7b9561d4d3dee46b8d422a8a8ec555c514e2b15f0729341b00000017481dc615021a000292011518851616a0f5f6",
  ];

  for (final tx in txs) {
    // final cborData = cborDecode(tx.hexDecode());
    // print(cborData.toJsonV2(prettyPrint: true));
    final txx = CardanoTransaction.deserializeFromHex(tx);

    print("CBOR Input: $tx");
    print("CBOR Parsed");
    print(txx.toJson(prettyPrint: true));
  }
  return;

  // final minswapSubmitOrder = "84a60081825820b6e5f6eedabe5d5d3a20c68a16b2ad3c9ddf3d5f5fdd49403779187d365db7da02018283583911a65ca58a4e9c755fa830173d2a5caed458ac0c73f97db7faae2e7e3b52563c5410bff6a0d43ccebb7c37e1f69f5eb260552521adff33b9c21a008943dc5820cee864d5509f3e26489b8295a7eb9a19c0947428b459652217ef57956a669baa82583901ed49d9adbd06592290b9a16032375d6b79d4df760cad0d9bca9555fc4199f66b16ce9eb5849ed96473face025b2e9bcbdf1e352ad43629811a0af98e3a021a0002d141031a05db9eb0075820f1ff69ee39c1773d81414326ebe36a35ad2341d58e63e7f49fd3ae3df28791ec0b5820574ee569d6ac99001f2db7b442442e2b0ad42bbc991bd0b8cb8d5986832c2e65a20081825820dd5fba0222e5a11fd1979c4cc7a1ee88ff7a6c0ead5cb62d008a72dd709afae15840990583e7c2422199e4aeeb44eaa8cd1a03bd5774322df92e58e3aa726179a97577b076df5fe411f7b8efea67ee8be2dbe9766e7b15bf6f56319f0777e1c61d04049fd8799fd8799fd8799f581ced49d9adbd06592290b9a16032375d6b79d4df760cad0d9bca9555fcffd8799fd8799fd8799f581c4199f66b16ce9eb5849ed96473face025b2e9bcbdf1e352ad4362981ffffffffd8799fd8799f581ced49d9adbd06592290b9a16032375d6b79d4df760cad0d9bca9555fcffd8799fd8799fd8799f581c4199f66b16ce9eb5849ed96473face025b2e9bcbdf1e352ad4362981ffffffffd87a80d8799fd8799f581c29d222ce763455e3d7a09a665ce554f00ac89d2e99a1a83d267170c6434d494eff1a03fb2a80ff1a001e741c1a001e8480fffff5a11902a2a1636d736781781d4d696e737761703a2073776170206f7264657220766961205645535052";
  // final minswapCancelOrder = "84aa0081825820471e33432b8c6e5820e53618154ba23a2b5c094e1935ddfda9b8751aad3dfc4600018182583901ed49d9adbd06592290b9a16032375d6b79d4df760cad0d9bca9555fc4199f66b16ce9eb5849ed96473face025b2e9bcbdf1e352ad43629811a00862885021a00031b57031a05dbac62075820039c21bb80e729f444f6f5ab66b7e6d4c1deca6ece1cafe940209783bba2a32d0b582073542d38263fb89753b0e4da0df046da94175f2165b40861b609859d74a49c150d818258205938fa6313b485a1a0b7492e2d61336141ea7a7ad4dad041955d52c05d923ad4000e81581ced49d9adbd06592290b9a16032375d6b79d4df760cad0d9bca9555fc1082583901ed49d9adbd06592290b9a16032375d6b79d4df760cad0d9bca9555fc4199f66b16ce9eb5849ed96473face025b2e9bcbdf1e352ad43629811a004c4b40111a004c4b40a3038159014f59014c01000032323232323232322223232325333009300e30070021323233533300b3370e9000180480109118011bae30100031225001232533300d3300e22533301300114a02a66601e66ebcc04800400c5288980118070009bac3010300c300c300c300c300c300c300c007149858dd48008b18060009baa300c300b3754601860166ea80184ccccc0288894ccc04000440084c8c94ccc038cd4ccc038c04cc030008488c008dd718098018912800919b8f0014891ce1317b152faac13426e6a83e06ff88a4d62cce3c1634ab0a5ec133090014a0266008444a00226600a446004602600a601a00626600a008601a006601e0026ea8c03cc038dd5180798071baa300f300b300e3754601e00244a0026eb0c03000c92616300a001375400660106ea8c024c020dd5000aab9d5744ae688c8c0088cc0080080048c0088cc00800800555cf2ba15573e6e1d200201049fd8799fd8799fd8799f581ced49d9adbd06592290b9a16032375d6b79d4df760cad0d9bca9555fcffd8799fd8799fd8799f581c4199f66b16ce9eb5849ed96473face025b2e9bcbdf1e352ad4362981ffffffffd8799fd8799f581ced49d9adbd06592290b9a16032375d6b79d4df760cad0d9bca9555fcffd8799fd8799fd8799f581c4199f66b16ce9eb5849ed96473face025b2e9bcbdf1e352ad4362981ffffffffd87a80d8799fd8799f581c29d222ce763455e3d7a09a665ce554f00ac89d2e99a1a83d267170c6434d494eff1a03fb2a80ff1a001e741c1a001e8480ffff0581840000d87a80821950131a007a6dacf5a11902a2a1636d736781754d696e737761703a2043616e63656c204f72646572";

  final String raw_tx = """
  84a500818258206bb955dc14b7a58a15e2c2280d20b20348d79a6adb0f47089e7dcc5716de7a9301018282583900e53a24b2fbeeef3bc3adc55622092cc8c172fad61c231d1358e5f023272d0b87fb7b9561d4d3dee46b8d422a8a8ec555c514e2b15f0729341a000f424082583900e53a24b2fbeeef3bc3adc55622092cc8c172fad61c231d1358e5f023272d0b87fb7b9561d4d3dee46b8d422a8a8ec555c514e2b15f0729341b00000017481dc615021a000292011518851616a0f5f6
  """
      .trim()
      .split("\n")
      .map((e) => e.replaceAll("flutter: â•‘ ", ""))
      .join();

  final txx = CardanoTransaction.deserializeFromHex(raw_tx);

  print(txx.toJson(prettyPrint: true));
}
